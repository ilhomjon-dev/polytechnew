"use strict";window.isw={},function(t,e){e.extend(t=t||{},{ajax_url:isw_vars.ajax,nonce:isw_vars.nonce,product_selector:isw_vars.product_selector,price_selector:isw_vars.price_selector,localization:isw_vars.localization})}.apply(this,[window.isw,jQuery]),function(o,_){o=o||{},_.extend(o,{Swatches:{init:function(){this.$form=_("form.isw-swatches.variations_form"),this.$swatches=_("div.isw-swatches"),this.initSingle(),this.initLoop(),_(".isw-term").each(function(){"rgb(255, 255, 255)"===_(this).css("background-color")&&_(this).addClass("isw-white")})},register:function(t){this.handlerSwatches(t)},initSingle:function(){var t=this.$form;this.handlerSwatches(t)},handlerSwatches:function(t){var e=t.find(".isw-term"),a=t.find(".isw-term:not(.isw-disabled)");e.each(function(){var t=_(this),e=t.attr("data-term"),a=t.attr("title"),i=t.parent().attr("data-attribute"),s=t.closest(".row-isw-swatch").find("select").filter('[id="'+i+'"]').val();""!==s&&e===s&&(_(this).addClass("isw-selected"),_("body").trigger("isw_selected",[i,e,a,t]))}),a.off("click").on("click",function(t){t.preventDefault();t=_(this);if(t.hasClass("isw-disabled"))return!1;var e=t.attr("data-term"),a=t.attr("title"),i=t.parent().attr("data-attribute");t.closest(".row-isw-swatch").find("select").filter('[id="'+i+'"]').val(e).trigger("change"),t.parent(".isw-swatch").find(".isw-selected").removeClass("isw-selected"),t.addClass("isw-selected"),_("body").trigger("isw_selected",[i,e,a,t])}),t.on("woocommerce_update_variation_values",function(){t.find("select").each(function(){var t=_(this),a=t.parent().find(".isw-swatch");a.find(".isw-term").removeClass("isw-enabled isw-out-of-stock").addClass("isw-disabled"),t.find("option").each(function(){var t=_(this),e=t.val(),e=a.find('.isw-term[data-term="'+e+'"]');t.hasClass("enabled")&&e.removeClass("isw-disabled").addClass("isw-enabled"),t.hasClass("out-of-stock")&&e.addClass("isw-out-of-stock")})})}),t.on("reset_data",function(){_("body").trigger("isw_reset"),_(this).find(".isw-selected").removeClass("isw-selected"),_(this).find("select").each(function(){var t=_(this).attr("id"),e=_(this).find("option:selected").text(),a=_(this).val();""!==a&&(_(this).parent().find('.isw-term[data-term="'+a+'"]').addClass("isw-selected"),_("body").trigger("isw_reset_attr",[t,a,e]))})})},initLoop:function(){var n=this;n.$swatches.each(function(){var i=_(this),t=i.find(".isw-term:not(.isw-disabled)"),s=i.find(".reset_variations--loop"),r=i.closest(o.product_selector),d=_.parseJSON(i.attr("data-product_variations"));0==i.find(".isw-swatch").length&&i.addClass("isw-empty"),t.off("click").on("click",function(t){var e=_(this);if(e.hasClass("isw-disabled"))return!1;e.attr("data-term");r.find(".isw-term").removeClass("isw-disabled isw-enabled"),e.parent().find(".isw-term.isw-selected").removeClass("isw-selected"),e.hasClass("isw-selected")?(e.parent().removeClass("isw-activated"),r.removeClass("isw-product-swatched"),r.find(".isw-selected").length||s.trigger("click")):(e.parent().addClass("isw-activated"),e.addClass("isw-selected"),r.addClass("isw-product-swatched"),s.addClass("show").show());var e=n.getChosenAttributes(i),a=e.data;e.count===e.chosenCount?(n.updateAttributes(i,d),(e=n.findMatchingVariations(d,a).shift())?n.foundVariation(i,e):s.trigger("click")):n.updateAttributes(i,d),t.preventDefault()}),s.off("click").on("click",function(){r.removeClass("isw-product-swatched"),i.removeAttr("data-variation_id"),i.find(".isw-swatch").removeClass("isw-activated"),i.find(".isw-term").removeClass("isw-enabled isw-disabled isw-selected"),_("body").trigger("isw_reset_add_to_cart_button_text",[r]),r.find(".add_to_cart_button").removeClass("isw-ready isw-readmore isw-text-changed added loading").text(o.localization.select_options_text);var t=r.find(o.price_selector).not(".price-cloned"),e=r.find(".price-cloned");return e.length&&(t.html(e.html()),e.remove()),n.variationsImageUpdate(!1,r),_(this).removeClass("show").hide(),!1})}),_(document).on("click",".add_to_cart_button.product_type_variable.isw-ready",function(){var t,e,a,i=_(this),s=i.closest(o.product_selector).find(".isw-swatches"),r=s.attr("data-variation_id");return void 0===r||""==r||(t=i.attr("data-product_id"),e=i.attr("data-quantity"),a={},s.find(".isw-swatch").each(function(){var t=_(this).attr("data-attribute");a[t]=_(this).find("span.isw-selected").attr("aria-label")}),i.removeClass("added"),s={action:"isw_add_to_cart",nonce:o.nonce,product_id:t,quantity:e,variation_id:r,variation:a},_("body").trigger("adding_to_cart",[i,s]),_.ajax({type:"POST",url:o.ajax_url,data:s,dataType:"json",success:function(t){if(!t)return!1;t.error&&t.product_url?window.location=t.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:_(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,i])},error:function(t){console.log(t)}}),!1)})},updateAttributes:function(t,w){var h,u=this,f=u.getChosenAttributes(t).data;t.find(".isw-swatch").each(function(t,e){var a,i=_(e),s="attribute_"+i.attr("data-attribute"),e=i.find(".isw-term.isw-selected").attr("data-term"),r=_.extend(!0,{},f),d=(r[s]="",u.findMatchingVariations(w,r));for(a in d)if(void 0!==d[a]){var n,o,c,l=d[a].attributes;for(n in l)l.hasOwnProperty(n)&&(o=l[n],c="",n===s)&&(d[a].variation_is_active&&(c="enabled"),(o?i.find('.isw-term[data-term="'+o+'"]'):i.find(".isw-term")).addClass("isw-"+c))}h=i.find(".isw-term.isw-enabled").length,e&&0!==h&&i.find('.isw-term.isw-enabled[data-term="'+u.addSlashes(e)+'"]').length,i.find(".isw-term:not(.isw-enabled)").addClass("isw-disabled")})},addSlashes:function(t){return t=(t=t.replace(/'/g,"\\'")).replace(/"/g,'\\"')},getChosenAttributes:function(t){var a={},i=0,s=0;return t.find(".isw-swatch").each(function(){var t="attribute_"+_(this).attr("data-attribute"),e=_(this).find(".isw-term.isw-selected").attr("data-term")||"";0<e.length&&s++,i++,a[t]=e}),{count:i,chosenCount:s,data:a}},findMatchingVariations:function(t,e){for(var a=[],i=0;i<t.length;i++){var s=t[i];this.isMatch(s.attributes,e)&&a.push(s)}return a},isMatch:function(t,e){var a,i,s,r=!0;for(a in t)t.hasOwnProperty(a)&&(i=t[a],s=e[a],void 0!==i)&&void 0!==s&&0!==i.length&&0!==s.length&&i!==s&&(r=!1);return r},foundVariation:function(t,e){var a=t.closest(".product"),i=a.find(o.price_selector).not(".price-cloned"),s=i.clone().addClass("price-cloned").css("display","none");e.price_html?(a.find(".price-cloned").length||a.append(s),i.replaceWith(e.price_html)):a.find(".price-cloned").length&&(i.replaceWith(s.html()),s.remove()),t.attr("data-variation_id",e.variation_id),this.variationsImageUpdate(e,a),this.changeAddToCartBtnText(e,a)},setVariationAttr:function(t,e,a){void 0===t.attr("data-o_"+e)&&t.attr("data-o_"+e,t.attr(e)?t.attr(e):""),!1===a?t.removeAttr(e):t.attr(e,a)},resetVariationAttr:function(t,e){void 0!==t.attr("data-o_"+e)&&t.attr(e,t.attr("data-o_"+e))},variationsImageUpdate:function(t,e){var a=this,e=e.find(".wp-post-image");t&&t.image.full_src?(a.setVariationAttr(e,"src",t.image.full_src),a.setVariationAttr(e,"srcset",t.image.full_src),a.setVariationAttr(e,"sizes",t.image.sizes)):(a.resetVariationAttr(e,"src"),a.resetVariationAttr(e,"srcset"),a.resetVariationAttr(e,"sizes"))},changeAddToCartBtnText:function(t,e){var a=e.find(".add_to_cart_button"),i="";a.removeClass("added"),Object.keys(t.attributes).length==e.find(".isw-swatch").length?!0===t.is_in_stock?(i=o.localization.add_to_cart_text,a.addClass("isw-ready").removeClass("isw-readmore")):(i=o.localization.read_more_text,a.addClass("isw-readmore").removeClass("isw-ready")):(i=o.localization.select_options_text,a.removeClass("isw-ready isw-readmore")),a.addClass("isw-text-changed").text(i),_("body").trigger("isw_change_add_to_cart_button_text",[e])}}})}.apply(this,[window.isw,jQuery]),function(t,e){e(document).ready(function(){void 0!==t.Swatches&&t.Swatches.init()})}.apply(this,[window.isw,jQuery]);