{"version":3,"sources":["general.js"],"names":["$","fn","serializeArrayAll","rCRLF","this","map","elements","jQuery","makeArray","i","elem","val","type","checked","name","value","isArray","replace","get","$body","openQuickViewPopup","$popup","$button","removeClass","magnificPopup","open","mainClass","items","src","html","callbacks","$contentWrap","content","find","popupHeight","window","innerHeight","Math","min","$sliderWrap","outerHeight","perfectScrollbar","suppressScrollX","thumbsSlider","children","UnicampSwiper","mainSlider","thumbs","swiper","$form","isw","Swatches","init","wc_add_to_cart_variation_params","each","wc_variation_form","variations","data","on","isFieldSelected","needReset","globalAttrs","formValues","serializeArray","length","_name","substring","selectedAttributes","Object","entries","variationImageID","minMatch","currentVariation","currentAttributes","attributes","loopMatch","forEach","key","selectedKey","selectedValue","image_id","$wrapperEl","index","slideImageID","attr","parseInt","slideTo","document","ready","unicampNotices","e","preventDefault","stopPropagation","productID","parents","first","addClass","ajax","url","$unicamp","ajaxurl","param","action","pid","dataType","success","results","template","append","settings","addedText","noticeAddedCartText","messages","undefined","image","title","noticeCartUrl","noticeCartText","push","growl","location","duration","message","splice","wc_add_to_cart_params","evt","variationID","quantity","$thisButton","hasClass","$variationsForm","closest","product_id","variation_id","endsWith","trigger","post","wc_ajax_url","toString","response","redirect","error","product_url","cart_redirect_after_add","cart_url","body","fragments","cart_hash","always"],"mappings":"AAAA,CACA,SAAAA,GACA,aAEAA,EAAAC,GAAAC,kBAAA,WACA,IAAAC,EAAA,SACA,OAAAC,KAAAC,IAAA,WACA,OAAAD,KAAAE,SAAAC,OAAAC,UAAAJ,KAAAE,QAAA,EAAAF,IACA,CAAA,EAAAC,IAAA,SAAAI,EAAAC,GACA,IAAAC,EAAAJ,OAAAH,IAAA,EAAAO,IAAA,EACA,OAAA,MAAAA,IAIA,YAAAP,KAAAQ,MAAA,GAAAR,KAAAS,QACA,CACAC,KAAAV,KAAAU,KACAC,MAAAX,KAAAS,QAAAT,KAAAW,MAAA,EACA,EAIAR,OAAAS,QAAAL,CAAA,EACAJ,OAAAF,IAAAM,EAAA,SAAAA,EAAAF,GACA,MAAA,CACAK,KAAAJ,EAAAI,KACAC,MAAAJ,EAAAM,QAAAd,EAAA,MAAA,CACA,CACA,CAAA,EACA,CACAW,KAAAJ,EAAAI,KACAC,MAAAJ,EAAAM,QAAAd,EAAA,MAAA,CACA,EAEA,CAAA,EAAAe,IAAA,CACA,EAEA,IAAAC,EAAAnB,EAAA,MAAA,EAgDA,SAAAoB,EAAAC,EAAAC,GACAA,EAAAC,YAAA,SAAA,EAEAvB,EAAAwB,cAAAC,KAAA,CACAC,UAAA,oCACAC,MAAA,CACAC,IAAAP,EAAAQ,KAAA,EACAjB,KAAA,QACA,EACAkB,UAAA,CACAL,KAAA,WACA,IAAAM,EAAA3B,KAAA4B,QAAAC,KAAA,oBAAA,EAGAC,EAAAC,OAAAC,YAAA,GAIAF,EAAAG,KAAAC,IAAAJ,EAAA,GAAA,EAQAK,GANAR,EAAAS,YAAAN,CAAA,EAEAH,EAAAU,iBAAA,CACAC,gBAAA,CAAA,CACA,CAAA,EAEAtC,KAAA4B,QAAAC,KAAA,qBAAA,GACAU,EAAAJ,EAAAK,SAAA,wBAAA,EAAAC,cAAA,EACAC,EAAAP,EAAAK,SAAA,sBAAA,EAAAC,cAAA,CACAE,OAAA,CACAC,OAAAL,CACA,CACA,CAAA,EAaAM,GAXA,aAAA,OAAAC,KAAA,KAAA,IAAAA,IAAAC,UACAD,IAAAC,SAAAC,KAAA,EAIA,aAAA,OAAAC,iCACAjD,KAAA4B,QAAAC,KAAA,kBAAA,EAAAqB,KAAA,WACAtD,EAAAI,IAAA,EAAAmD,kBAAA,CACA,CAAA,EAGAnD,KAAA4B,QAAAC,KAAA,kBAAA,GACAuB,EAAAP,EAAAQ,KAAA,oBAAA,EAEAR,EAAAhB,KAAA,QAAA,EAAAyB,GAAA,SAAA,WAQA,IAPA,IAAAC,EAAA,CAAA,EACAC,EAAA,CAAA,EACAC,EAAA,GAEAC,EAAAb,EAAAc,eAAA,EAGAtD,EAAA,EAAAA,EAAAqD,EAAAE,OAAAvD,CAAA,GAAA,CAEA,IAAAwD,EAAAH,EAAArD,GAAAK,KAEA,GAAA,eAAAmD,EAAAC,UAAA,EAAA,EAAA,IAEAL,EAAAI,GAAAH,EAAArD,GAAAM,MAEA,KAAA+C,EAAArD,GAAAM,OAAA,CACA4C,EAAA,CAAA,EAEA,KACA,CAEA,CAEA,GAAA,CAAA,IAAAA,EAAA,CAOA,IALA,IAAAQ,EAAAC,OAAAC,QAAAR,CAAA,EAEAS,EAAA,EACAC,EAAA,EAEA9D,EAAA+C,EAAAQ,OAAA,EAAA,GAAAvD,EAAAA,CAAA,GAAA,CACA,IAAA+D,EAAAhB,EAAA/C,GACAgE,EAAAL,OAAAC,QAAAG,EAAAE,UAAA,EACAC,EAAA,EAGAF,EAAAG,QAAA,CAAA,CAAAC,EAAA9D,MACAoD,EAAAS,QAAA,CAAA,CAAAE,EAAAC,MAEAD,IAAAD,GACAE,IAAAhE,GACA,KAAAA,GAEA4D,CAAA,EAGA,CAAA,CACA,CAAA,EAEAJ,EAAAI,IACAJ,EAAAI,EACAL,EAAAE,EAAAQ,SAEA,CAEAV,EACAxB,EAAAmC,WAAAhD,KAAA,eAAA,EAAAqB,KAAA,SAAA4B,GACA,IAAAC,EAAAnF,EAAAI,IAAA,EAAAgF,KAAA,eAAA,EAGA,GAFAC,SAAAF,CAAA,IAEAb,EAGA,OAFAxB,EAAAwC,QAAAJ,CAAA,EAEA,CAAA,CAEA,CAAA,EAEAtB,EAAA,CAAA,CAEA,MACAA,EAAA,CAAA,EAIAA,IAEAsB,EADApC,EAAAmC,WAAAhD,KAAA,qBAAA,EACAiD,MAAA,EACApC,EAAAwC,QAAAJ,CAAA,EAEA,CAAA,CACA,CACA,CACA,CAAA,CACA,CAlLAlF,EAAAuF,QAAA,EAAAC,MAAA,WAoLA,IACAC,EA9KAzF,EAAA,kBAAA,EAAA0D,GAAA,QAAA,kBAAA,SAAAgC,GACAA,EAAAC,eAAA,EACAD,EAAAE,gBAAA,EAEA,IAAAtE,EAAAtB,EAAAI,IAAA,EAMAyF,GAJAvE,EAAAwE,QAAA,kBAAA,EAAAC,MAAA,EACAC,SAAA,SAAA,EAEA1E,EAAA0E,SAAA,SAAA,EACA1E,EAAAmC,KAAA,KAAA,GAKApC,EAAAF,EAAAyB,SAAA,qCAAAiD,CAAA,EACA,EAAAxE,EAAA2C,OACA5C,EAAAC,EAAAC,CAAA,EAOAtB,EAAAiG,KAAA,CACAC,IAAAC,SAAAC,QACAxF,KAAA,OACA6C,KAAAzD,EAAAqG,MARA,CACAC,OAAA,qBACAC,IAAAV,CACA,CAKA,EACAW,SAAA,OACAC,QAAA,SAAAC,GACArF,EAAArB,EAAA0G,EAAAC,QAAA,EACAxF,EAAAyF,OAAAvF,CAAA,EACAD,EAAAC,EAAAC,CAAA,CACA,CACA,CAAA,CAEA,CAAA,EA0IAmE,EAAA,GAEAtE,EAAAuC,GAAA,QAAA,oBAAA,WACA,IACAmD,EADA7G,EAAAI,IAAA,EAAA0F,QAAA,oBAAA,EAAAC,MAAA,EACAtC,KAAA,cAAA,EAEAqD,EAAA,4BAAAX,SAAAY,oBAAA,UACAC,EAAAF,EAEAG,KAAAA,IAAAJ,IACAG,EAAA,mCACA,KAAAH,EAAAK,QACAF,GAAA,4CAAAH,EAAAK,MAAA,UAAAL,EAAAM,MAAA,aAGAH,EADAA,GAAA,0DAAAH,EAAAM,OAAA,SAAAL,EACA,gBAGAE,GAAA,yDAAAb,SAAAiB,cAAA,+EAAAjB,SAAAkB,eAAA,aAEA5B,EAAA6B,KAAAN,CAAA,CACA,CAAA,EAEA7F,EAAAuC,GAAA,gBAAA,WACA,IAAA,IAAAjD,EAAA,EAAAA,EAAAgF,EAAAzB,OAAAvD,CAAA,GAGAT,EAAAuH,MAAA,CACAC,SAAA,KACAC,SAAA,IACAN,MAAA,GACAO,QANAjC,EAAAhF,EAOA,CAAA,EAEAgF,EAAAkC,OAAAlH,EAAA,CAAA,CAEA,CAAA,EAKA,aAAA,OAAAmH,uBAQA5H,EAAAuF,QAAA,EAAA7B,GAAA,QAAA,oDAAA,SAAAmE,GACAA,EAAAlC,eAAA,EAEA,IAWAE,EACAiC,EACAC,EAUAtE,EAvBAuE,EAAAhI,EAAAI,IAAA,EAEA,MAAA4H,CAAAA,EAAAC,SAAA,UAAA,GAIAD,CAAAA,EAAAC,SAAA,gBAAA,IAKApC,GADAqC,EAAAF,EAAAG,QAAA,WAAA,GACAlG,KAAA,oBAAA,EAAAtB,IAAA,EACAmH,EAAAI,EAAAjG,KAAA,0BAAA,EAAAtB,IAAA,EACAoH,EAAAG,EAAAjG,KAAA,+BAAA,EAAAtB,IAAA,EAMA,KAAA,KAHAkF,EADA,gBAAAmC,EAAA5C,KAAA,MAAA,EACA4C,EAAArH,IAAA,EAGAkF,KAIApC,EAAA,CACA2E,WAAAvC,EACAwC,aAAAP,CACA,EAEAI,EAAAnE,eAAA,EAAA1D,IAAA,SAAA+E,GACA,IAEAtE,EAFA,gBAAAsE,EAAAtE,OACAsE,EAAAtE,KAAAwH,SAAA,IAAA,IACAxH,EAAAsE,EAAAtE,KAAAoD,UAAA,EAAAkB,EAAAtE,KAAAkD,OAAA,CAAA,KAEAP,IAEAA,EAAA3C,GAAA,IAEA2C,EAAA3C,GAAAwG,KAAAlC,EAAArE,KAAA,GAEA0C,EAAA2B,EAAAtE,MAAAsE,EAAArE,MAGA,CAAA,EAGAiH,EAAA5C,KAAA,UAAA,IACA2C,EAAA1C,SAAA2C,EAAA5C,KAAA,UAAA,CAAA,GAEA3B,EAAAsE,SAAAA,EAEAC,EAAAzG,YAAA,OAAA,EAAAyE,SAAA,uBAAA,EAGAhG,EAAA,MAAA,EAAAuI,QAAA,iBAAA,CAAAP,EAAAvE,EAAA,EAGAzD,EAAAwI,KAAAZ,sBAAAa,YAAAC,SAAA,EAAAzH,QAAA,eAAA,qBAAA,EAAAwC,EAAA,SAAAkF,GACA,IAUAC,EAVAD,IAIAA,EAAAE,OAAAF,EAAAG,YACA3G,OAAAqF,SAAAmB,EAAAG,aAKAF,EAAAZ,EAAAvE,KAAA,UAAA,IACA,KAAAmF,EACAzG,OAAAqF,SAAAoB,EAKA,QAAAhB,sBAAAmB,wBACA5G,OAAAqF,SAAAI,sBAAAoB,SAKAhJ,EAAAuF,SAAA0D,IAAA,EAAAV,QAAA,gBAAA,CACAI,EAAAO,UAAAP,EAAAQ,UAAAnB,EACA,EAEA,CAAA,EAAAoB,OAAA,WACApB,EAAAhC,SAAA,OAAA,EAAAzE,YAAA,uBAAA,CACA,CAAA,IACA,CAAA,CA5TA,CAAA,CA8TA,EAAAhB,MACA","file":"../../../woo/general.min.js","sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\t$.fn.serializeArrayAll = function() {\n\t\t\tvar rCRLF = /\\r?\\n/g;\n\t\t\treturn this.map( function() {\n\t\t\t\treturn this.elements ? jQuery.makeArray( this.elements ) : this;\n\t\t\t} ).map( function( i, elem ) {\n\t\t\t\tvar val = jQuery( this ).val();\n\t\t\t\tif ( val == null ) {\n\t\t\t\t\treturn val == null\n\t\t\t\t\t//next 2 lines of code look if it is a checkbox and set the value to blank\n\t\t\t\t\t//if it is unchecked\n\t\t\t\t} else if ( this.type == \"checkbox\" && this.checked == false ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\tvalue: this.checked ? this.value : ''\n\t\t\t\t\t}\n\t\t\t\t\t//next lines are kept from default jQuery implementation and\n\t\t\t\t\t//default to all checkboxes = on\n\t\t\t\t} else {\n\t\t\t\t\treturn jQuery.isArray( val ) ?\n\t\t\t\t\t\tjQuery.map( val, function( val, i ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: elem.name,\n\t\t\t\t\t\t\t\tvalue: val.replace( rCRLF, \"\\r\\n\" )\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: elem.name,\n\t\t\t\t\t\t\tvalue: val.replace( rCRLF, \"\\r\\n\" )\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} ).get();\n\t\t};\n\n\t\tvar $body = $( 'body' );\n\n\t\t$( document ).ready( function() {\n\t\t\tinitQuickViewPopup();\n\t\t\taddToCartNotification();\n\t\t\tsingleProductAddToCart();\n\t\t} );\n\n\t\tfunction initQuickViewPopup() {\n\t\t\t$( '.unicamp-product' ).on( 'click', '.quick-view-btn', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tvar $button = $( this );\n\n\t\t\t\tvar $actions = $button.parents( '.product-actions' ).first();\n\t\t\t\t$actions.addClass( 'refresh' );\n\n\t\t\t\t$button.addClass( 'loading' );\n\t\t\t\tvar productID = $button.data( 'pid' );\n\n\t\t\t\t/**\n\t\t\t\t * Avoid duplicate ajax request.\n\t\t\t\t */\n\t\t\t\tvar $popup = $body.children( '#' + 'popup-product-quick-view-content-' + productID );\n\t\t\t\tif ( $popup.length > 0 ) {\n\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t} else {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\taction: 'product_quick_view',\n\t\t\t\t\t\tpid: productID\n\t\t\t\t\t};\n\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\turl: $unicamp.ajaxurl,\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: $.param( data ),\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tsuccess: function( results ) {\n\t\t\t\t\t\t\t$popup = $( results.template );\n\t\t\t\t\t\t\t$body.append( $popup );\n\t\t\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction openQuickViewPopup( $popup, $button ) {\n\t\t\t$button.removeClass( 'loading' );\n\n\t\t\t$.magnificPopup.open( {\n\t\t\t\tmainClass: 'mfp-fade popup-product-quick-view',\n\t\t\t\titems: {\n\t\t\t\t\tsrc: $popup.html(),\n\t\t\t\t\ttype: 'inline'\n\t\t\t\t},\n\t\t\t\tcallbacks: {\n\t\t\t\t\topen: function() {\n\t\t\t\t\t\tvar $contentWrap = this.content.find( '.product-container' );\n\n\t\t\t\t\t\t// Max height of popup = Window height - top bottom spacing.\n\t\t\t\t\t\tvar popupHeight = window.innerHeight - 60;\n\n\t\t\t\t\t\t// If window height large then used fixed height.\n\t\t\t\t\t\t// Popup max height = 760.\n\t\t\t\t\t\tpopupHeight = Math.min( popupHeight, 760 );\n\n\t\t\t\t\t\t$contentWrap.outerHeight( popupHeight );\n\n\t\t\t\t\t\t$contentWrap.perfectScrollbar( {\n\t\t\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tvar $sliderWrap = this.content.find( '.woo-single-gallery' );\n\t\t\t\t\t\tvar thumbsSlider = $sliderWrap.children( '.unicamp-thumbs-swiper' ).UnicampSwiper();\n\t\t\t\t\t\tvar mainSlider = $sliderWrap.children( '.unicamp-main-swiper' ).UnicampSwiper( {\n\t\t\t\t\t\t\tthumbs: {\n\t\t\t\t\t\t\t\tswiper: thumbsSlider\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( typeof isw != 'undefined' && typeof isw.Swatches !== 'undefined' ) {\n\t\t\t\t\t\t\tisw.Swatches.init();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Re init add to cart form variation.\n\t\t\t\t\t\tif ( typeof wc_add_to_cart_variation_params !== 'undefined' ) {\n\t\t\t\t\t\t\tthis.content.find( '.variations_form' ).each( function() {\n\t\t\t\t\t\t\t\t$( this ).wc_variation_form();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar $form = this.content.find( '.variations_form' );\n\t\t\t\t\t\tvar variations = $form.data( 'product_variations' );\n\n\t\t\t\t\t\t$form.find( 'select' ).on( 'change', function() {\n\t\t\t\t\t\t\tvar isFieldSelected = true;\n\t\t\t\t\t\t\tvar needReset = false;\n\t\t\t\t\t\t\tvar globalAttrs = {};\n\n\t\t\t\t\t\t\tvar formValues = $form.serializeArray();\n\n\t\t\t\t\t\t\t// Check all attributes selected.\n\t\t\t\t\t\t\tfor ( var i = 0; i < formValues.length; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar _name = formValues[ i ].name;\n\n\t\t\t\t\t\t\t\tif ( _name.substring( 0, 10 ) === 'attribute_' ) {\n\n\t\t\t\t\t\t\t\t\tglobalAttrs[ _name ] = formValues[ i ].value;\n\n\t\t\t\t\t\t\t\t\tif ( formValues[ i ].value === '' ) {\n\t\t\t\t\t\t\t\t\t\tisFieldSelected = false;\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( isFieldSelected === true ) {\n\t\t\t\t\t\t\t\t// Convert to array.\n\t\t\t\t\t\t\t\tvar selectedAttributes = Object.entries( globalAttrs );\n\n\t\t\t\t\t\t\t\tvar variationImageID = 0;\n\t\t\t\t\t\t\t\tvar minMatch = 0;\n\n\t\t\t\t\t\t\t\tfor ( var i = variations.length - 1; i >= 0; i -- ) {\n\t\t\t\t\t\t\t\t\tvar currentVariation = variations[ i ];\n\t\t\t\t\t\t\t\t\tvar currentAttributes = Object.entries( currentVariation.attributes ); // Convert to array.\n\t\t\t\t\t\t\t\t\tvar loopMatch = 0;\n\n\t\t\t\t\t\t\t\t\t// Compare selected variation with all variations to find best matches.\n\t\t\t\t\t\t\t\t\tcurrentAttributes.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\t\t\t\t\tselectedAttributes.forEach( ( [ selectedKey, selectedValue ] ) => {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( selectedKey === key ) {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( selectedValue === value\n\t\t\t\t\t\t\t\t\t\t\t\t     || '' === value // Any Terms.\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tloopMatch ++;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( minMatch < loopMatch ) {\n\t\t\t\t\t\t\t\t\t\tminMatch = loopMatch;\n\t\t\t\t\t\t\t\t\t\tvariationImageID = currentVariation.image_id;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( variationImageID ) {\n\t\t\t\t\t\t\t\t\tmainSlider.$wrapperEl.find( '.swiper-slide' ).each( function( index ) {\n\t\t\t\t\t\t\t\t\t\tvar slideImageID = $( this ).attr( 'data-image-id' );\n\t\t\t\t\t\t\t\t\t\tslideImageID = parseInt( slideImageID );\n\n\t\t\t\t\t\t\t\t\t\tif ( slideImageID === variationImageID ) {\n\t\t\t\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Reset to main image.\n\t\t\t\t\t\t\tif ( needReset ) {\n\t\t\t\t\t\t\t\tvar $mainImage = mainSlider.$wrapperEl.find( '.product-main-image' );\n\t\t\t\t\t\t\t\tvar index = $mainImage.index();\n\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction addToCartNotification() {\n\t\t\tvar unicampNotices = [];\n\n\t\t\t$body.on( 'click', '.ajax_add_to_cart', function() {\n\t\t\t\tvar $addedProduct = $( this ).parents( '.cart-notification' ).first();\n\t\t\t\tvar settings = $addedProduct.data( 'notification' );\n\n\t\t\t\tvar addedText = '<span class=\"added-text\">' + $unicamp.noticeAddedCartText + '</span>';\n\t\t\t\tvar messages = addedText;\n\n\t\t\t\tif ( settings !== undefined ) {\n\t\t\t\t\tmessages = '<div class=\"product-added-cart\">';\n\t\t\t\t\tif ( '' !== settings.image ) {\n\t\t\t\t\t\tmessages += '<div class=\"product-thumbnail\"><img src=\"' + settings.image + '\" alt=\"' + settings.title + '\"/></div>'\n\t\t\t\t\t}\n\t\t\t\t\tmessages += '<div class=\"product-caption\"><h3 class=\"product-title\">' + settings.title + ' </h3>' + addedText + '</div>';\n\t\t\t\t\tmessages += '</div>'\n\t\t\t\t}\n\n\t\t\t\tmessages += '<div class=\"tm-button-wrapper btn-view-cart\"><a href=\"' + $unicamp.noticeCartUrl + '\" class=\"tm-button button-grey style-flat tm-button-xs tm-button-full-wide\">' + $unicamp.noticeCartText + '</a></div>';\n\n\t\t\t\tunicampNotices.push( messages );\n\t\t\t} );\n\n\t\t\t$body.on( 'added_to_cart', function() {\n\t\t\t\tfor ( var i = 0; i < unicampNotices.length; i ++ ) {\n\t\t\t\t\tvar messages = unicampNotices[ i ];\n\n\t\t\t\t\t$.growl( {\n\t\t\t\t\t\tlocation: 'br',\n\t\t\t\t\t\tduration: 5000,\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tmessage: messages,\n\t\t\t\t\t} );\n\n\t\t\t\t\tunicampNotices.splice( i, 1 );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction singleProductAddToCart() {\n\t\t\t// wc_add_to_cart_params is required to continue, ensure the object exists.\n\t\t\tif ( typeof wc_add_to_cart_params === 'undefined' ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Ajax add to cart.\n\t\t\t * button query selector to compatible with Lumise add on.\n\t\t\t */\n\t\t\t$( document ).on( 'click', 'button.single_add_to_cart_button.ajax_add_to_cart', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $thisButton = $( this );\n\n\t\t\t\tif ( $thisButton.hasClass( 'disabled' ) ) { // Variation select required.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( $thisButton.hasClass( 'woosb-disabled' ) ) { // Smart Bundle select required.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar $variationsForm = $thisButton.closest( 'form.cart' ),\n\t\t\t\t    productID       = $variationsForm.find( '[name=add-to-cart]' ).val(),\n\t\t\t\t    variationID     = $variationsForm.find( 'input[name=variation_id]' ).val(),\n\t\t\t\t    quantity        = $variationsForm.find( '.quantity .qty[name=quantity]' ).val();\n\n\t\t\t\tif ( 'add-to-cart' === $thisButton.attr( 'name' ) ) {\n\t\t\t\t\tproductID = $thisButton.val();\n\t\t\t\t}\n\n\t\t\t\tif ( 0 === productID ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar data = {\n\t\t\t\t\tproduct_id: productID,\n\t\t\t\t\tvariation_id: variationID,\n\t\t\t\t};\n\n\t\t\t\t$variationsForm.serializeArray().map( function( attr ) {\n\t\t\t\t\tif ( attr.name !== 'add-to-cart' ) {\n\t\t\t\t\t\tif ( attr.name.endsWith( '[]' ) ) {\n\t\t\t\t\t\t\tlet name = attr.name.substring( 0, attr.name.length - 2 );\n\t\t\t\t\t\t\tif ( ! (\n\t\t\t\t\t\t\t\tname in data\n\t\t\t\t\t\t\t) ) {\n\t\t\t\t\t\t\t\tdata[name] = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdata[name].push( attr.value );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata[attr.name] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Custom quantity per button.\n\t\t\t\tif ( $thisButton.attr( 'data-qty' ) ) {\n\t\t\t\t\tquantity = parseInt( $thisButton.attr( 'data-qty' ) );\n\t\t\t\t}\n\t\t\t\tdata.quantity = quantity;\n\n\t\t\t\t$thisButton.removeClass( 'added' ).addClass( 'loading updating-icon' );\n\n\t\t\t\t// Trigger event.\n\t\t\t\t$( 'body' ).trigger( 'adding_to_cart', [ $thisButton, data ] );\n\n\t\t\t\t// Ajax action.\n\t\t\t\t$.post( wc_add_to_cart_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'unicamp_add_to_cart' ), data, function( response ) {\n\t\t\t\t\tif ( ! response ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( response.error && response.product_url ) {\n\t\t\t\t\t\twindow.location = response.product_url;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Redirect to checkout for Buy Now button.\n\t\t\t\t\tvar redirect = $thisButton.data( 'redirect' );\n\t\t\t\t\tif ( redirect && '' !== redirect ) {\n\t\t\t\t\t\twindow.location = redirect;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Redirect to cart option.\n\t\t\t\t\tif ( wc_add_to_cart_params.cart_redirect_after_add === 'yes' ) {\n\t\t\t\t\t\twindow.location = wc_add_to_cart_params.cart_url;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Trigger event so themes can refresh other areas.\n\t\t\t\t\t$( document.body ).trigger( 'added_to_cart', [\n\t\t\t\t\t\tresponse.fragments, response.cart_hash, $thisButton\n\t\t\t\t\t] );\n\n\t\t\t\t} ).always( function() {\n\t\t\t\t\t$thisButton.addClass( 'added' ).removeClass( 'loading updating-icon' );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t}( jQuery )\n);\n"]}